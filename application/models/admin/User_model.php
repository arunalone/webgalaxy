<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class User_model extends CI_Model {    function __construct() {        parent:: __construct();    }    function getUserCount($user_status, $search_val, $user_type, $dept) {        $this->db->select('E.emp_id,E.first_name,E.last_name,D.dept_name,R.role_name,E.status,E.mobile_no,E.email_id', FALSE);        $this->db->from(TBL_EMPLOYEE . ' AS E');        $this->db->join(TBL_DEPT . " AS D", "D.dept_id = E.dept_id AND D.status = 'ACTIVE'");        $this->db->join(TBL_ROLE . " AS R", "R.role_id = E.role_id AND R.status = 'ACTIVE'");        $this->db->where('E.emp_id !=', $this->session->userdata('emp_id'));        if ($user_status != '') {            $this->db->where("E.status", $user_status);        } else {            $this->db->where_in('E.status', array('ACTIVE', 'INACTIVE'));        }        if ($search_val) {            $this->db->like('E.first_name', $search_val, 'both');            $this->db->or_like('E.last_name', $search_val, 'both');            $this->db->or_like('E.email_id', $search_val, 'both');        }        if ($user_type) {            $this->db->where('E.role_id', $user_type);        }        if ($dept) {            $this->db->where('E.dept_id', $dept);        }        $this->db->group_by('E.emp_id');        $query = $this->db->get();        return ($query->num_rows() > 0) ? $query->num_rows() : FALSE;    }    function getUserList($user_status, $search_val, $page, $start, $colname, $sort, $user_type, $dept) {        $this->db->select('E.emp_id,E.first_name,E.last_name,D.dept_name,R.role_name,E.status,E.mobile_no,E.email_id', FALSE);        $this->db->from(TBL_EMPLOYEE . ' AS E');        $this->db->join(TBL_DEPT . " AS D", "D.dept_id = E.dept_id AND D.status = 'ACTIVE'");        $this->db->join(TBL_ROLE . " AS R", "R.role_id = E.role_id AND R.status= 'ACTIVE'");        $this->db->where('E.emp_id !=', $this->session->userdata('emp_id'));        if ($user_status != '') {            $this->db->where("E.status", $user_status);        } else {            $this->db->where_in('E.status', array('ACTIVE', 'INACTIVE'));        }        if ($search_val) {            $this->db->like('E.first_name', $search_val, 'both');            $this->db->or_like('E.last_name', $search_val, 'both');            $this->db->or_like('E.email_id', $search_val, 'both');        }        if ($user_type) {            $this->db->where('E.role_id', $user_type);        }        if ($dept) {            $this->db->where('E.dept_id', $dept);        }        $this->db->group_by('E.emp_id');        $this->db->order_by($colname, $sort);        $this->db->limit($page, $start);        $query = $this->db->get();        return ($query->num_rows() > 0) ? $query->result() : FALSE;    }    function check_login($email, $password) {        $this->db->select("");        $this->db->from(TBL_EMPLOYEE . ' AS A');        $this->db->where('A.status', "ACTIVE");        $this->db->where("A.email_id", $email);        $this->db->where("A.password", md5($password));        $query = $this->db->get();        return ($query->num_rows() > 0) ? $query->row() : "";    }}